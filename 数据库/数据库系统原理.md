# 范式

范式：设计数据库要遵循的规范

高层次的范式要符合低层次的范式；1NF是最低级别的范式；层次越高，数据库冗余越小

关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF/完美范式）



## 第一范式（1NF）

定义：每个属性都不能再分

下表不符合1NF，因为"系"可以再分

![1574681335873](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574681335873.png)

修改：拆分即可

![1574681347770](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574681347770.png)

经过1NF修改后，仍然存在问题：

* 冗余严重：姓名，系名，系主任
* 插入异常：只添加新的系名和系主任时，数据不合法（因为其他4个属性都无定义） 
* 删除异常：删除“张无忌”时，会将“经济系”的数据一起删除



## 第二范式（2NF）

几个概念

1. 函数依赖：A→B，如果通过A属性(属性组)，可以确定唯一B属性，称B依赖于A（A决定B）
   * 例如：学号→姓名，（学号，课程名称）→分数

2. 完全函数依赖：A→B， 如果A是一个属性组，而B属性的确定要依赖于A属性组中所有的属性
   * 例如：（**学号，课程名称**） → 分数，因为分数由学号和课程名称确定

3. 部分函数依赖：A→B， 如果A是一个属性组，而B属性的确定只需要依赖于A属性组中的部分属性
   * 例如：（**学号**，课程名称）→ 姓名，因为姓名只由学号决定，和课程名称无关

4. 传递函数依赖：若A→B，B→C，则 A→C 是一个传递函数依赖
   * 例如：学号→学生，学生→老师，则学号→老师是一个传递函数依赖

5. 码（键码）：表中的一个属性或属性组，被其他所有属性完全依赖，则称这个属性(属性组)为该表的码。例如：（学号，课程名称）
   * 主属性：码的属性
   * 非主属性：码以外的属性



第二范式：在1NF的基础上，非主属性必须完全依赖于码（消除非主属性对码的部分依赖）

上图中，分数完全依赖于（学号，课程名称），姓名/系名/系主任完全依赖于学号。修改——消除部分依赖，拆分。

![1574681981064](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574681981064.png)

经过2NF修改后，仍然存在后2个问题：

* 插入异常：只添加新的系名和系主任时，数据不合法（因为其他4个属性都无定义）
* 删除异常：删除“张无忌”时，会将“经济系”的数据一起删除



## 第三范式（3NF）

定义：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）

上图中，学号→系名，系名→系主任，因此学号和系主任有传递依赖。修改——将传递依赖分解，学号→系名在一张表，系名→系主任在另一张表。

![1574682072817](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574682072817.png)